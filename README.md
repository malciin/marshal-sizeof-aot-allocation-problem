# `Marshal.SizeOf<T>()` problem when building nativeAOT.

## `dotnet run`:

Run: `dotnet run`

Output:

```
Memory never increased! :)
```

## Not aot

Run commands:

```
dotnet publish -c Release -p:PublishSingleFile=true -o no-aot
.\no-aot\aot-marshal-sizeof-not-alloc-free.exe
```

Output:

```
Memory never increased! :)
```

## AOT

Run commands:

```
dotnet publish -c Release -p:PublishAot=true -o aot
.\aot\aot-marshal-sizeof-not-alloc-free.exe
```

Output:

```
Detected increase 46.0KB -> 54.0KB
Detected increase 62.1KB -> 69.8KB
Detected increase 69.8KB -> 77.9KB
Detected increase 77.9KB -> 85.9KB
Detected increase 85.9KB -> 93.9KB
Detected increase 93.9KB -> 102.0KB
Detected increase 102.0KB -> 110.0KB
Detected increase 110.0KB -> 118.0KB
Detected increase 118.0KB -> 126.1KB
Detected increase 126.1KB -> 133.8KB
Detected increase 133.8KB -> 141.9KB
Detected increase 141.9KB -> 149.9KB
Detected increase 149.9KB -> 157.9KB
Detected increase 157.9KB -> 166.0KB
Detected increase 166.0KB -> 174.0KB
Detected increase 174.0KB -> 182.0KB
Detected increase 182.0KB -> 190.1KB
Detected increase 190.1KB -> 197.8KB
Detected increase 197.8KB -> 205.9KB
Detected increase 205.9KB -> 213.9KB
Detected increase 213.9KB -> 221.9KB
Detected increase 221.9KB -> 230.0KB
Detected increase 230.0KB -> 238.0KB
Detected increase 238.0KB -> 246.0KB
Detected increase 246.0KB -> 254.1KB
Detected increase 254.1KB -> 261.8KB
Detected increase 261.8KB -> 269.9KB
Detected increase 269.9KB -> 277.9KB
Detected increase 277.9KB -> 285.9KB
Detected increase 285.9KB -> 294.0KB
Detected increase 294.0KB -> 302.0KB
Detected increase 302.0KB -> 310.0KB
Detected increase 310.0KB -> 318.1KB
Detected increase 318.1KB -> 325.8KB
Detected increase 325.8KB -> 333.9KB
Detected increase 333.9KB -> 341.9KB
Detected increase 341.9KB -> 349.9KB
Detected increase 349.9KB -> 358.0KB
Detected increase 358.0KB -> 366.0KB
Detected increase 366.0KB -> 374.0KB
Detected increase 374.0KB -> 382.1KB
Detected increase 382.1KB -> 389.8KB
Detected increase 389.8KB -> 397.9KB
Detected increase 397.9KB -> 405.9KB
Detected increase 405.9KB -> 413.9KB
Detected increase 413.9KB -> 422.0KB
Detected increase 422.0KB -> 430.0KB
Detected increase 430.0KB -> 438.0KB
Detected increase 438.0KB -> 446.1KB
Detected increase 446.1KB -> 453.8KB
Detected increase 453.8KB -> 461.9KB
Detected increase 461.9KB -> 469.9KB
Detected increase 469.9KB -> 477.9KB
Detected increase 477.9KB -> 486.0KB
Detected increase 486.0KB -> 494.0KB
Detected increase 494.0KB -> 502.0KB
Detected increase 502.0KB -> 510.1KB
Detected increase 510.1KB -> 517.8KB
Detected increase 517.8KB -> 525.9KB
Detected increase 525.9KB -> 533.9KB
Detected increase 533.9KB -> 541.9KB
Detected increase 541.9KB -> 550.0KB
Detected increase 550.0KB -> 558.0KB
Detected increase 558.0KB -> 566.0KB
Detected increase 566.0KB -> 574.1KB
Detected increase 574.1KB -> 581.8KB
Detected increase 581.8KB -> 589.9KB
Detected increase 589.9KB -> 597.9KB
Detected increase 597.9KB -> 605.9KB
Detected increase 605.9KB -> 614.0KB
Detected increase 614.0KB -> 622.0KB
Detected increase 622.0KB -> 630.0KB
Detected increase 630.0KB -> 638.1KB
Detected increase 638.1KB -> 645.8KB
Detected increase 645.8KB -> 653.9KB
Detected increase 653.9KB -> 661.9KB
Detected increase 661.9KB -> 669.9KB
Detected increase 669.9KB -> 678.0KB
Detected increase 678.0KB -> 686.0KB
Detected increase 686.0KB -> 694.0KB
Detected increase 694.0KB -> 702.1KB
Detected increase 702.1KB -> 709.8KB
Detected increase 709.8KB -> 717.9KB
Detected increase 717.9KB -> 725.9KB
Detected increase 725.9KB -> 733.9KB
Detected increase 733.9KB -> 742.0KB
Detected increase 742.0KB -> 750.0KB
Detected increase 750.0KB -> 758.0KB
Detected increase 758.0KB -> 766.1KB
Detected increase 766.1KB -> 773.8KB
Detected increase 773.8KB -> 781.9KB
Detected increase 781.9KB -> 789.9KB
Detected increase 789.9KB -> 797.9KB
Detected increase 797.9KB -> 806.0KB
Detected increase 806.0KB -> 814.0KB
Detected increase 814.0KB -> 822.0KB
Detected increase 822.0KB -> 830.1KB
Detected increase 830.1KB -> 837.8KB
Detected increase 837.8KB -> 845.9KB
Detected increase 845.9KB -> 853.9KB
Detected increase 853.9KB -> 861.9KB
Detected increase 861.9KB -> 870.0KB
Detected increase 870.0KB -> 878.0KB
Detected increase 878.0KB -> 886.0KB
Detected increase 886.0KB -> 894.1KB
Detected increase 894.1KB -> 901.8KB
Detected increase 901.8KB -> 909.9KB
Detected increase 909.9KB -> 917.9KB
Detected increase 917.9KB -> 925.9KB
Detected increase 925.9KB -> 934.0KB
Detected increase 934.0KB -> 942.0KB
Detected increase 942.0KB -> 950.0KB
Detected increase 950.0KB -> 958.1KB
Detected increase 958.1KB -> 965.8KB
Detected increase 965.8KB -> 973.9KB
Detected increase 973.9KB -> 981.9KB
Detected increase 981.9KB -> 989.9KB
Detected increase 989.9KB -> 998.0KB
Detected increase 998.0KB -> 1006.0KB
Detected increase 1006.0KB -> 1014.0KB
Detected increase 1014.0KB -> 1022.1KB
Detected increase 1022.1KB -> 1029.8KB
Detected increase 1029.8KB -> 1037.9KB
Detected increase 1037.9KB -> 1045.9KB
Detected increase 1045.9KB -> 1053.9KB
Detected increase 1053.9KB -> 1062.0KB
Detected increase 1062.0KB -> 1070.0KB
Detected increase 1070.0KB -> 1078.0KB
Detected increase 1078.0KB -> 1086.1KB
Detected increase 1086.1KB -> 1093.8KB
Detected increase 1093.8KB -> 1101.9KB
Detected increase 1101.9KB -> 1109.9KB
Detected increase 1109.9KB -> 1117.9KB
Detected increase 1117.9KB -> 1126.0KB
Detected increase 1126.0KB -> 1134.0KB
Detected increase 1134.0KB -> 1142.0KB
Detected increase 1142.0KB -> 1150.1KB
Detected increase 1150.1KB -> 1157.8KB
Detected increase 1157.8KB -> 1165.9KB
Detected increase 1165.9KB -> 1173.9KB
Detected increase 1173.9KB -> 1181.9KB
Detected increase 1181.9KB -> 1190.0KB
Detected increase 1190.0KB -> 1198.0KB
Detected increase 1198.0KB -> 1206.0KB
Detected increase 1206.0KB -> 1214.1KB
Detected increase 1214.1KB -> 1221.8KB
Detected increase 1221.8KB -> 1229.9KB
Detected increase 1229.9KB -> 1237.9KB
Detected increase 1237.9KB -> 1245.9KB
Detected increase 1245.9KB -> 1254.0KB
Detected increase 1254.0KB -> 1262.0KB
Detected increase 1262.0KB -> 1270.0KB
Detected increase 1270.0KB -> 1278.1KB
Detected increase 1278.1KB -> 1285.8KB
Detected increase 1285.8KB -> 1293.9KB
Detected increase 1293.9KB -> 1301.9KB
Detected increase 1301.9KB -> 1309.9KB
Detected increase 1309.9KB -> 1318.0KB
Detected increase 1318.0KB -> 1326.0KB
Detected increase 1326.0KB -> 1334.0KB
Detected increase 1334.0KB -> 1342.1KB
Detected increase 1342.1KB -> 1349.8KB
Detected increase 1349.8KB -> 1357.9KB
Detected increase 1357.9KB -> 1365.9KB
Detected increase 1365.9KB -> 1373.9KB
Detected increase 1373.9KB -> 1382.0KB
Detected increase 1382.0KB -> 1390.0KB
Detected increase 1390.0KB -> 1398.0KB
Detected increase 1398.0KB -> 1406.1KB
Detected increase 1406.1KB -> 1413.8KB
Detected increase 1413.8KB -> 1421.9KB
Detected increase 1421.9KB -> 1429.9KB
Detected increase 1429.9KB -> 1437.9KB
Detected increase 1437.9KB -> 1446.0KB
Detected increase 1446.0KB -> 1454.0KB
Detected increase 1454.0KB -> 1462.0KB
Detected increase 1462.0KB -> 1470.1KB
Detected increase 1470.1KB -> 1477.8KB
Detected increase 1477.8KB -> 1485.9KB
Detected increase 1485.9KB -> 1493.9KB
Detected increase 1493.9KB -> 1501.9KB
Detected increase 1501.9KB -> 1510.0KB
Detected increase 1510.0KB -> 1518.0KB
Detected increase 1518.0KB -> 1526.0KB
Detected increase 1526.0KB -> 1534.1KB
Detected increase 1534.1KB -> 1541.8KB
Detected increase 1541.8KB -> 1549.9KB
Detected increase 1549.9KB -> 1557.9KB
Detected increase 1557.9KB -> 1565.9KB
Detected increase 1565.9KB -> 1574.0KB
Detected increase 1574.0KB -> 1582.0KB
Detected increase 1582.0KB -> 1590.0KB
Detected increase 1590.0KB -> 1598.1KB
Detected increase 1598.1KB -> 1605.8KB
Detected increase 1605.8KB -> 1613.9KB
Detected increase 1613.9KB -> 1621.9KB
Detected increase 1621.9KB -> 1629.9KB
Detected increase 1629.9KB -> 1638.0KB
Detected increase 1638.0KB -> 1646.0KB
Detected increase 1646.0KB -> 1654.0KB
Detected increase 1654.0KB -> 1662.1KB
Detected increase 1662.1KB -> 1669.8KB
Detected increase 1669.8KB -> 1677.9KB
Detected increase 1677.9KB -> 1685.9KB
Detected increase 1685.9KB -> 1693.9KB
Detected increase 1693.9KB -> 1702.0KB
Detected increase 1702.0KB -> 1710.0KB
Detected increase 1710.0KB -> 1718.0KB
Detected increase 1718.0KB -> 1726.1KB
Detected increase 1726.1KB -> 1733.8KB
Detected increase 1733.8KB -> 1741.9KB
Detected increase 1741.9KB -> 1749.9KB
Detected increase 1749.9KB -> 1757.9KB
Detected increase 1757.9KB -> 1766.0KB
Detected increase 1766.0KB -> 1774.0KB
Detected increase 1774.0KB -> 1782.0KB
Detected increase 1782.0KB -> 1790.1KB
Detected increase 1790.1KB -> 1797.8KB
Detected increase 1797.8KB -> 1805.9KB
Detected increase 1805.9KB -> 1813.9KB
Detected increase 1813.9KB -> 1821.9KB
Detected increase 1821.9KB -> 1830.0KB
Detected increase 1830.0KB -> 1838.0KB
Detected increase 1838.0KB -> 1846.0KB
Detected increase 1846.0KB -> 1854.1KB
Detected increase 1854.1KB -> 1861.8KB
Detected increase 1861.8KB -> 1869.9KB
Detected increase 1869.9KB -> 1877.9KB
Detected increase 1877.9KB -> 1885.9KB
Detected increase 1885.9KB -> 1894.0KB
Detected increase 1894.0KB -> 1902.0KB
Detected increase 1902.0KB -> 1910.0KB
Detected increase 1910.0KB -> 1918.1KB
Detected increase 1918.1KB -> 1925.8KB
Detected increase 1925.8KB -> 1933.9KB
Detected increase 1933.9KB -> 1941.9KB
Detected increase 1941.9KB -> 1949.9KB
Detected increase 1949.9KB -> 1958.0KB
Detected increase 1958.0KB -> 1966.0KB
Detected increase 1966.0KB -> 1974.0KB
Detected increase 1974.0KB -> 1982.1KB
Detected increase 1982.1KB -> 1989.8KB
Detected increase 1989.8KB -> 1997.9KB
Detected increase 1997.9KB -> 2005.9KB
Detected increase 2005.9KB -> 2013.9KB
Detected increase 2013.9KB -> 2022.0KB
Detected increase 2022.0KB -> 2030.0KB
Detected increase 2030.0KB -> 2038.0KB
Detected increase 2038.0KB -> 2046.1KB
Detected increase 2046.1KB -> 2053.8KB
Detected increase 2053.8KB -> 2061.9KB
Detected increase 2061.9KB -> 2069.9KB
Detected increase 2069.9KB -> 2077.9KB
Detected increase 2077.9KB -> 2086.0KB
Detected increase 2086.0KB -> 2094.0KB
Detected increase 2094.0KB -> 2102.0KB
Detected increase 2102.0KB -> 2110.1KB
Detected increase 2110.1KB -> 2117.8KB
Detected increase 2117.8KB -> 2125.9KB
Detected increase 2125.9KB -> 2133.9KB
Detected increase 2133.9KB -> 2141.9KB
Detected increase 2141.9KB -> 2150.0KB
Detected increase 2150.0KB -> 2158.0KB
Detected increase 2158.0KB -> 2166.0KB
Detected increase 2166.0KB -> 2174.1KB
Detected increase 2174.1KB -> 2181.8KB
Detected increase 2181.8KB -> 2189.9KB
Detected increase 2189.9KB -> 2197.9KB
Detected increase 2197.9KB -> 2205.9KB
Detected increase 2205.9KB -> 2214.0KB
Detected increase 2214.0KB -> 2222.0KB
Detected increase 2222.0KB -> 2230.0KB
Detected increase 2230.0KB -> 2238.1KB
Detected increase 2238.1KB -> 2245.8KB
Detected increase 2245.8KB -> 2253.9KB
Detected increase 2253.9KB -> 2261.9KB
Detected increase 2261.9KB -> 2269.9KB
Detected increase 2269.9KB -> 2278.0KB
Detected increase 2278.0KB -> 2286.0KB
Detected increase 2286.0KB -> 2294.0KB
Detected increase 2294.0KB -> 2302.1KB
Detected increase 2302.1KB -> 2309.8KB
Detected increase 2309.8KB -> 2317.9KB
Detected increase 2317.9KB -> 2325.9KB
Detected increase 2325.9KB -> 2333.9KB
Detected increase 2333.9KB -> 2342.0KB
Detected increase 2342.0KB -> 2350.0KB
Detected increase 2350.0KB -> 2358.0KB
Detected increase 2358.0KB -> 2366.1KB
Detected increase 2366.1KB -> 2373.8KB
Detected increase 2373.8KB -> 2381.9KB
Detected increase 2381.9KB -> 2389.9KB
Detected increase 2389.9KB -> 2397.9KB
Detected increase 2397.9KB -> 2406.0KB
Detected increase 2406.0KB -> 2414.0KB
Detected increase 2414.0KB -> 2422.0KB
Detected increase 2422.0KB -> 2430.1KB
Detected increase 2430.1KB -> 2437.8KB
Detected increase 2437.8KB -> 2445.9KB
Detected increase 2445.9KB -> 2453.9KB
Detected increase 2453.9KB -> 2461.9KB
Detected increase 2461.9KB -> 2470.0KB
Detected increase 2470.0KB -> 2478.0KB
Detected increase 2478.0KB -> 2486.0KB
Detected increase 2486.0KB -> 2494.1KB
Detected increase 2494.1KB -> 2501.8KB
Detected increase 2501.8KB -> 2509.9KB
Detected increase 2509.9KB -> 2517.9KB
Detected increase 2517.9KB -> 2525.9KB
Detected increase 2525.9KB -> 2534.0KB
Detected increase 2534.0KB -> 2542.0KB
Detected increase 2542.0KB -> 2550.0KB
Detected increase 2550.0KB -> 2558.1KB
Detected increase 2558.1KB -> 2565.8KB
Detected increase 2565.8KB -> 2573.9KB
Detected increase 2573.9KB -> 2581.9KB
Detected increase 2581.9KB -> 2589.9KB
Detected increase 2589.9KB -> 2598.0KB
Detected increase 2598.0KB -> 2606.0KB
Detected increase 2606.0KB -> 2614.0KB
Detected increase 2614.0KB -> 2622.1KB
Detected increase 2622.1KB -> 2629.8KB
Detected increase 2629.8KB -> 2637.9KB
Detected increase 2637.9KB -> 2645.9KB
Detected increase 2645.9KB -> 2653.9KB
Detected increase 2653.9KB -> 2662.0KB
Detected increase 2662.0KB -> 2670.0KB
Detected increase 2670.0KB -> 2678.0KB
Detected increase 2678.0KB -> 2686.1KB
Detected increase 2686.1KB -> 2693.8KB
Detected increase 2693.8KB -> 2701.9KB
Detected increase 2701.9KB -> 2709.9KB
Detected increase 2709.9KB -> 2717.9KB
Detected increase 2717.9KB -> 2726.0KB
Detected increase 2726.0KB -> 2734.0KB
Detected increase 2734.0KB -> 2742.0KB
Detected increase 2742.0KB -> 2750.1KB
Detected increase 2750.1KB -> 2757.8KB
Detected increase 2757.8KB -> 2765.9KB
Detected increase 2765.9KB -> 2773.9KB
Detected increase 2773.9KB -> 2781.9KB
Detected increase 2781.9KB -> 2790.0KB
Detected increase 2790.0KB -> 2798.0KB
Detected increase 2798.0KB -> 2806.0KB
Detected increase 2806.0KB -> 2814.1KB
Detected increase 2814.1KB -> 2821.8KB
Detected increase 2821.8KB -> 2829.9KB
Detected increase 2829.9KB -> 2837.9KB
Detected increase 2837.9KB -> 2845.9KB
Detected increase 2845.9KB -> 2854.0KB
Detected increase 2854.0KB -> 2862.0KB
Detected increase 2862.0KB -> 2870.0KB
Detected increase 2870.0KB -> 2878.1KB
Detected increase 2878.1KB -> 2885.8KB
Detected increase 2885.8KB -> 2893.9KB
Detected increase 2893.9KB -> 2901.9KB
Detected increase 2901.9KB -> 2909.9KB
Detected increase 2909.9KB -> 2918.0KB
Detected increase 2918.0KB -> 2926.0KB
Detected increase 2926.0KB -> 2934.0KB
Detected increase 2934.0KB -> 2942.1KB
Detected increase 2942.1KB -> 2949.8KB
Detected increase 2949.8KB -> 2957.9KB
Detected increase 2957.9KB -> 2965.9KB
Detected increase 2965.9KB -> 2973.9KB
Detected increase 2973.9KB -> 2982.0KB
Detected increase 2982.0KB -> 2990.0KB
Detected increase 2990.0KB -> 2998.0KB
Detected increase 2998.0KB -> 3006.1KB
Detected increase 3006.1KB -> 3013.8KB
Detected increase 3013.8KB -> 3021.9KB
Detected increase 3021.9KB -> 3029.9KB
Detected increase 3029.9KB -> 3037.9KB
Detected increase 3037.9KB -> 3046.0KB
Detected increase 3046.0KB -> 3054.0KB
Detected increase 3054.0KB -> 3062.0KB
Detected increase 3062.0KB -> 3070.1KB
Detected increase 3070.1KB -> 3077.8KB
Detected increase 3077.8KB -> 3085.9KB
Detected increase 3085.9KB -> 3093.9KB
Detected increase 3093.9KB -> 3101.9KB
Detected increase 3101.9KB -> 3110.0KB
Detected increase 3110.0KB -> 3118.0KB
Detected increase 3118.0KB -> 3126.0KB
Detected increase 3126.0KB -> 3134.1KB
Detected increase 3134.1KB -> 3141.8KB
Detected increase 3141.8KB -> 3149.9KB
Detected increase 3149.9KB -> 3157.9KB
Detected increase 3157.9KB -> 3165.9KB
Detected increase 3165.9KB -> 3174.0KB
Detected increase 3174.0KB -> 3182.0KB
Detected increase 3182.0KB -> 3190.0KB
Detected increase 3190.0KB -> 3198.1KB
```